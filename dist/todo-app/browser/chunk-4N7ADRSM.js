var Jt=Object.defineProperty,Xt=Object.defineProperties;var Yt=Object.getOwnPropertyDescriptors;var Be=Object.getOwnPropertySymbols;var Qt=Object.prototype.hasOwnProperty,Zt=Object.prototype.propertyIsEnumerable;var Le=(t,e,n)=>e in t?Jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fe=(t,e)=>{for(var n in e||={})Qt.call(e,n)&&Le(t,n,e[n]);if(Be)for(var n of Be(e))Zt.call(e,n)&&Le(t,n,e[n]);return t},Ue=(t,e)=>Xt(t,Yt(e));var u=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var je=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},en=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,g=s>>2,d=(s&3)<<4|a>>4,E=(a&15)<<2|l>>6,$=l&63;c||($=64,o||(E=64)),r.push(n[g],n[d],n[E],n[$])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(je(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):en(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new ee;let E=s<<2|a>>4;if(r.push(E),l!==64){let $=a<<4&240|l>>2;if(r.push($),d!==64){let Gt=l<<6&192|d;r.push(Gt)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ee=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},tn=function(t){let e=je(t);return Ve.encodeByteArray(e,!0)},te=function(t){return tn(t).replace(/\./g,"")},nn=function(t){try{return Ve.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function rn(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var sn=()=>rn().__FIREBASE_DEFAULTS__,on=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},an=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&nn(t[1]);return e&&JSON.parse(e)},cn=()=>{try{return sn()||on()||an()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}};var ne=()=>{var t;return(t=cn())===null||t===void 0?void 0:t.config};var j=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function V(){try{return typeof indexedDB=="object"}catch{return!1}}function z(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function ze(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var un="FirebaseError",v=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=un,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w.prototype.create)}},w=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?ln(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new v(i,a,r)}};function ln(t,e){return t.replace(fn,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var fn=/\{\$([^}]+)}/g;function x(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if($e(s)&&$e(o)){if(!x(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function $e(t){return t!==null&&typeof t=="object"}var Ji=4*60*60*1e3;function H(t){return t&&t._delegate?t._delegate:t}var dn=[],f=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(f||{}),hn={debug:f.DEBUG,verbose:f.VERBOSE,info:f.INFO,warn:f.WARN,error:f.ERROR,silent:f.SILENT},pn=f.INFO,gn={[f.DEBUG]:"log",[f.VERBOSE]:"log",[f.INFO]:"info",[f.WARN]:"warn",[f.ERROR]:"error"},mn=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=gn[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},P=class{constructor(e){this.name=e,this._logLevel=pn,this._logHandler=mn,this._userLogHandler=null,dn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in f))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,f.DEBUG,...e),this._logHandler(this,f.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,f.VERBOSE,...e),this._logHandler(this,f.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,f.INFO,...e),this._logHandler(this,f.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,f.WARN,...e),this._logHandler(this,f.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,f.ERROR,...e),this._logHandler(this,f.ERROR,...e)}};var b=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var D="[DEFAULT]";var re=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new j;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_n(e))try{this.getOrInitializeService({instanceIdentifier:D})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=D){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return u(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=D){return this.instances.has(e)}getOptions(e=D){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bn(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=D){return this.component?this.component.multipleInstances?e:D:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function bn(t){return t===D?void 0:t}function _n(t){return t.instantiationMode==="EAGER"}var q=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new re(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var En=(t,e)=>e.some(n=>t instanceof n),He,qe;function In(){return He||(He=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yn(){return qe||(qe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var We=new WeakMap,se=new WeakMap,Ke=new WeakMap,ie=new WeakMap,ae=new WeakMap;function vn(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(I(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&We.set(n,t)}).catch(()=>{}),ae.set(e,t),e}function wn(t){if(se.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});se.set(t,e)}var oe={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return se.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ke.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return I(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ge(t){oe=t(oe)}function Sn(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(W(this),e,...n);return Ke.set(r,e.sort?e.sort():[e]),I(r)}:yn().includes(t)?function(...e){return t.apply(W(this),e),I(We.get(this))}:function(...e){return I(t.apply(W(this),e))}}function Tn(t){return typeof t=="function"?Sn(t):(t instanceof IDBTransaction&&wn(t),En(t,In())?new Proxy(t,oe):t)}function I(t){if(t instanceof IDBRequest)return vn(t);if(ie.has(t))return ie.get(t);let e=Tn(t);return e!==t&&(ie.set(t,e),ae.set(e,t)),e}var W=t=>ae.get(t);function K(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=I(o);return r&&o.addEventListener("upgradeneeded",c=>{r(I(o.result),c.oldVersion,c.newVersion,I(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var An=["get","getKey","getAll","getAllKeys","count"],Cn=["put","add","delete","clear"],ce=new Map;function Je(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ce.get(e))return ce.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=Cn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||An.includes(n)))return;let s=function(o,...a){return u(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return ce.set(e,s),s}Ge(t=>Ue(Fe({},t),{get:(e,n,r)=>Je(e,n)||t.get(e,n,r),has:(e,n)=>!!Je(e,n)||t.has(e,n)}));var le=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(On(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function On(t){let e=t.getComponent();return e?.type==="VERSION"}var fe="@firebase/app",Xe="0.10.9";var T=new P("@firebase/app"),Dn="@firebase/app-compat",Rn="@firebase/analytics-compat",Nn="@firebase/analytics",Mn="@firebase/app-check-compat",kn="@firebase/app-check",xn="@firebase/auth",Pn="@firebase/auth-compat",Bn="@firebase/database",Ln="@firebase/database-compat",Fn="@firebase/functions",Un="@firebase/functions-compat",$n="@firebase/installations",jn="@firebase/installations-compat",Vn="@firebase/messaging",zn="@firebase/messaging-compat",Hn="@firebase/performance",qn="@firebase/performance-compat",Wn="@firebase/remote-config",Kn="@firebase/remote-config-compat",Gn="@firebase/storage",Jn="@firebase/storage-compat",Xn="@firebase/firestore",Yn="@firebase/vertexai-preview",Qn="@firebase/firestore-compat",Zn="firebase";var de="[DEFAULT]",er={[fe]:"fire-core",[Dn]:"fire-core-compat",[Nn]:"fire-analytics",[Rn]:"fire-analytics-compat",[kn]:"fire-app-check",[Mn]:"fire-app-check-compat",[xn]:"fire-auth",[Pn]:"fire-auth-compat",[Bn]:"fire-rtdb",[Ln]:"fire-rtdb-compat",[Fn]:"fire-fn",[Un]:"fire-fn-compat",[$n]:"fire-iid",[jn]:"fire-iid-compat",[Vn]:"fire-fcm",[zn]:"fire-fcm-compat",[Hn]:"fire-perf",[qn]:"fire-perf-compat",[Wn]:"fire-rc",[Kn]:"fire-rc-compat",[Gn]:"fire-gcs",[Jn]:"fire-gcs-compat",[Xn]:"fire-fst",[Qn]:"fire-fst-compat",[Yn]:"fire-vertex","fire-js":"fire-js",[Zn]:"fire-js-all"};var L=new Map,tr=new Map,he=new Map;function Ye(t,e){try{t.container.addComponent(e)}catch(n){T.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function C(t){let e=t.name;if(he.has(e))return T.debug(`There were multiple attempts to register component ${e}.`),!1;he.set(e,t);for(let n of L.values())Ye(n,t);for(let n of tr.values())Ye(n,t);return!0}function B(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var nr={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},A=new w("app","Firebase",nr);var pe=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new b("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw A.create("app-deleted",{appName:this._name})}};function rr(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:de,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw A.create("bad-app-name",{appName:String(i)});if(n||(n=ne()),!n)throw A.create("no-options");let s=L.get(i);if(s){if(x(n,s.options)&&x(r,s.config))return s;throw A.create("duplicate-app",{appName:i})}let o=new q(i);for(let c of he.values())o.addComponent(c);let a=new pe(n,r,o);return L.set(i,a),a}function be(t=de){let e=L.get(t);if(!e&&t===de&&ne())return rr();if(!e)throw A.create("no-app",{appName:t});return e}function ps(){return Array.from(L.values())}function S(t,e,n){var r;let i=(r=er[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),T.warn(a.join(" "));return}C(new b(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var ir="firebase-heartbeat-database",sr=1,F="firebase-heartbeat-store",ue=null;function tt(){return ue||(ue=K(ir,sr,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(F)}catch(n){console.warn(n)}}}}).catch(t=>{throw A.create("idb-open",{originalErrorMessage:t.message})})),ue}function or(t){return u(this,null,function*(){try{let n=(yield tt()).transaction(F),r=yield n.objectStore(F).get(nt(t));return yield n.done,r}catch(e){if(e instanceof v)T.warn(e.message);else{let n=A.create("idb-get",{originalErrorMessage:e?.message});T.warn(n.message)}}})}function Qe(t,e){return u(this,null,function*(){try{let r=(yield tt()).transaction(F,"readwrite");yield r.objectStore(F).put(e,nt(t)),yield r.done}catch(n){if(n instanceof v)T.warn(n.message);else{let r=A.create("idb-set",{originalErrorMessage:n?.message});T.warn(r.message)}}})}function nt(t){return`${t.name}!${t.options.appId}`}var ar=1024,cr=30*24*60*60*1e3,ge=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new me(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return u(this,null,function*(){var e,n,r;try{let s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Ze();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let c=new Date(a.date).valueOf();return Date.now()-c<=cr}),this._storage.overwrite(this._heartbeatsCache))}catch(i){T.warn(i)}})}getHeartbeatsHeader(){return u(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Ze(),{heartbeatsToSend:r,unsentEntries:i}=ur(this._heartbeatsCache.heartbeats),s=te(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return T.warn(n),""}})}};function Ze(){return new Date().toISOString().substring(0,10)}function ur(t,e=ar){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),et(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),et(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var me=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return u(this,null,function*(){return V()?z().then(()=>!0).catch(()=>!1):!1})}read(){return u(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield or(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return u(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Qe(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return u(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Qe(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function et(t){return te(JSON.stringify({version:2,heartbeats:t})).length}function lr(t){C(new b("platform-logger",e=>new le(e),"PRIVATE")),C(new b("heartbeat",e=>new ge(e),"PRIVATE")),S(fe,Xe,t),S(fe,Xe,"esm2017"),S("fire-js","")}lr("");var st="@firebase/installations",ye="0.6.8";var ot=1e4,at=`w:${ye}`,ct="FIS_v2",fr="https://firebaseinstallations.googleapis.com/v1",dr=60*60*1e3,hr="installations",pr="Installations";var gr={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},N=new w(hr,pr,gr);function ut(t){return t instanceof v&&t.code.includes("request-failed")}function lt({projectId:t}){return`${fr}/projects/${t}/installations`}function ft(t){return{token:t.token,requestStatus:2,expiresIn:br(t.expiresIn),creationTime:Date.now()}}function dt(t,e){return u(this,null,function*(){let r=(yield e.json()).error;return N.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function ht({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function mr(t,{refreshToken:e}){let n=ht(t);return n.append("Authorization",_r(e)),n}function pt(t){return u(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function br(t){return Number(t.replace("s","000"))}function _r(t){return`${ct} ${t}`}function Er(r,i){return u(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let s=lt(t),o=ht(t),a=e.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}let c={fid:n,authVersion:ct,appId:t.appId,sdkVersion:at},l={method:"POST",headers:o,body:JSON.stringify(c)},g=yield pt(()=>fetch(s,l));if(g.ok){let d=yield g.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:ft(d.authToken)}}else throw yield dt("Create Installation",g)})}function gt(t){return new Promise(e=>{setTimeout(e,t)})}function Ir(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var yr=/^[cdef][\w-]{21}$/,Ie="";function vr(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=wr(t);return yr.test(n)?n:Ie}catch{return Ie}}function wr(t){return Ir(t).substr(0,22)}function J(t){return`${t.appName}!${t.appId}`}var mt=new Map;function bt(t,e){let n=J(t);_t(n,e),Sr(n,e)}function _t(t,e){let n=mt.get(t);if(n)for(let r of n)r(e)}function Sr(t,e){let n=Tr();n&&n.postMessage({key:t,fid:e}),Ar()}var R=null;function Tr(){return!R&&"BroadcastChannel"in self&&(R=new BroadcastChannel("[Firebase] FID Change"),R.onmessage=t=>{_t(t.data.key,t.data.fid)}),R}function Ar(){mt.size===0&&R&&(R.close(),R=null)}var Cr="firebase-installations-database",Or=1,M="firebase-installations-store",_e=null;function ve(){return _e||(_e=K(Cr,Or,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(M)}}})),_e}function G(t,e){return u(this,null,function*(){let n=J(t),i=(yield ve()).transaction(M,"readwrite"),s=i.objectStore(M),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&bt(t,e.fid),e})}function Et(t){return u(this,null,function*(){let e=J(t),r=(yield ve()).transaction(M,"readwrite");yield r.objectStore(M).delete(e),yield r.done})}function X(t,e){return u(this,null,function*(){let n=J(t),i=(yield ve()).transaction(M,"readwrite"),s=i.objectStore(M),o=yield s.get(n),a=e(o);return a===void 0?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&bt(t,a.fid),a})}function we(t){return u(this,null,function*(){let e,n=yield X(t.appConfig,r=>{let i=Dr(r),s=Rr(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Ie?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function Dr(t){let e=t||{fid:vr(),registrationStatus:0};return It(e)}function Rr(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(N.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Nr(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Mr(t)}:{installationEntry:e}}function Nr(t,e){return u(this,null,function*(){try{let n=yield Er(t,e);return G(t.appConfig,n)}catch(n){throw ut(n)&&n.customData.serverCode===409?yield Et(t.appConfig):yield G(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function Mr(t){return u(this,null,function*(){let e=yield rt(t.appConfig);for(;e.registrationStatus===1;)yield gt(100),e=yield rt(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield we(t);return r||n}return e})}function rt(t){return X(t,e=>{if(!e)throw N.create("installation-not-found");return It(e)})}function It(t){return kr(t)?{fid:t.fid,registrationStatus:0}:t}function kr(t){return t.registrationStatus===1&&t.registrationTime+ot<Date.now()}function xr(r,i){return u(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let s=Pr(t,n),o=mr(t,n),a=e.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}let c={installation:{sdkVersion:at,appId:t.appId}},l={method:"POST",headers:o,body:JSON.stringify(c)},g=yield pt(()=>fetch(s,l));if(g.ok){let d=yield g.json();return ft(d)}else throw yield dt("Generate Auth Token",g)})}function Pr(t,{fid:e}){return`${lt(t)}/${e}/authTokens:generate`}function Se(t,e=!1){return u(this,null,function*(){let n,r=yield X(t.appConfig,s=>{if(!yt(s))throw N.create("not-registered");let o=s.authToken;if(!e&&Fr(o))return s;if(o.requestStatus===1)return n=Br(t,e),s;{if(!navigator.onLine)throw N.create("app-offline");let a=$r(s);return n=Lr(t,a),a}});return n?yield n:r.authToken})}function Br(t,e){return u(this,null,function*(){let n=yield it(t.appConfig);for(;n.authToken.requestStatus===1;)yield gt(100),n=yield it(t.appConfig);let r=n.authToken;return r.requestStatus===0?Se(t,e):r})}function it(t){return X(t,e=>{if(!yt(e))throw N.create("not-registered");let n=e.authToken;return jr(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Lr(t,e){return u(this,null,function*(){try{let n=yield xr(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield G(t.appConfig,r),n}catch(n){if(ut(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield Et(t.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield G(t.appConfig,r)}throw n}})}function yt(t){return t!==void 0&&t.registrationStatus===2}function Fr(t){return t.requestStatus===2&&!Ur(t)}function Ur(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+dr}function $r(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function jr(t){return t.requestStatus===1&&t.requestTime+ot<Date.now()}function Vr(t){return u(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield we(e);return r?r.catch(console.error):Se(e).catch(console.error),n.fid})}function zr(t,e=!1){return u(this,null,function*(){let n=t;return yield Hr(n),(yield Se(n,e)).token})}function Hr(t){return u(this,null,function*(){let{registrationPromise:e}=yield we(t);e&&(yield e)})}function qr(t){if(!t||!t.options)throw Ee("App Configuration");if(!t.name)throw Ee("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw Ee(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Ee(t){return N.create("missing-app-config-values",{valueName:t})}var vt="installations",Wr="installations-internal",Kr=t=>{let e=t.getProvider("app").getImmediate(),n=qr(e),r=B(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Gr=t=>{let e=t.getProvider("app").getImmediate(),n=B(e,vt).getImmediate();return{getId:()=>Vr(n),getToken:i=>zr(n,i)}};function Jr(){C(new b(vt,Kr,"PUBLIC")),C(new b(Wr,Gr,"PRIVATE"))}Jr();S(st,ye);S(st,ye,"esm2017");var wt="@firebase/performance",Re="0.6.8";var Mt=Re,Xr="FB-PERF-TRACE-START",Yr="FB-PERF-TRACE-STOP",Ne="FB-PERF-TRACE-MEASURE",kt="_wt_",xt="_fp",Pt="_fcp",Bt="_fid",Lt="@firebase/performance/config",Ft="@firebase/performance/configexpire",Qr="performance",Ut="Performance";var Zr={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},p=new w(Qr,Ut,Zr);var y=new P(Ut);y.logLevel=f.INFO;var Te,$t,h=class t{constructor(e){if(this.window=e,!e)throw p.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,n,r){!this.performance||!this.performance.measure||this.performance.measure(e,n,r)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!ze()?(y.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):V()?!0:(y.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,n){if(!this.PerformanceObserver)return;new this.PerformanceObserver(i=>{for(let s of i.getEntries())n(s)}).observe({entryTypes:[e]})}static getInstance(){return Te===void 0&&(Te=new t($t)),Te}};function ei(t){$t=t}var jt;function ti(t){let e=t.getId();return e.then(n=>{jt=n}),e}function ke(){return jt}function ni(t){let e=t.getToken();return e.then(n=>{}),e}function St(t,e){let n=t.length-e.length;if(n<0||n>1)throw p.create("invalid String merger input");let r=[];for(let i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var Ae,m=class t{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=St("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=St("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return Ae===void 0&&(Ae=new t),Ae}};var U=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}(U||{}),ri=["firebase_","google_","ga_"],ii=new RegExp("^[a-zA-Z]\\w*$"),si=40,oi=100;function ai(){let t=h.getInstance().navigator;return t?.serviceWorker?t.serviceWorker.controller?2:3:1}function Vt(){switch(h.getInstance().document.visibilityState){case"visible":return U.VISIBLE;case"hidden":return U.HIDDEN;default:return U.UNKNOWN}}function ci(){let e=h.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function ui(t){return t.length===0||t.length>si?!1:!ri.some(n=>t.startsWith(n))&&!!t.match(ii)}function li(t){return t.length!==0&&t.length<=oi}function zt(t){var e;let n=(e=t.options)===null||e===void 0?void 0:e.appId;if(!n)throw p.create("no app id");return n}function fi(t){var e;let n=(e=t.options)===null||e===void 0?void 0:e.projectId;if(!n)throw p.create("no project id");return n}function di(t){var e;let n=(e=t.options)===null||e===void 0?void 0:e.apiKey;if(!n)throw p.create("no api key");return n}var hi="0.0.1",_={loggingEnabled:!0},pi="FIREBASE_INSTALLATIONS_AUTH";function gi(t,e){let n=mi();return n?(Tt(n),Promise.resolve()):Ei(t,e).then(Tt).then(r=>bi(r),()=>{})}function mi(){let t=h.getInstance().localStorage;if(!t)return;let e=t.getItem(Ft);if(!e||!Ii(e))return;let n=t.getItem(Lt);if(n)try{return JSON.parse(n)}catch{return}}function bi(t){let e=h.getInstance().localStorage;!t||!e||(e.setItem(Lt,JSON.stringify(t)),e.setItem(Ft,String(Date.now()+m.getInstance().configTimeToLive*60*60*1e3)))}var _i="Could not fetch config, will use default configs";function Ei(t,e){return ni(t.installations).then(n=>{let r=fi(t.app),i=di(t.app),s=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,o=new Request(s,{method:"POST",headers:{Authorization:`${pi} ${n}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:n,app_id:zt(t.app),app_version:Mt,sdk_version:hi})});return fetch(o).then(a=>{if(a.ok)return a.json();throw p.create("RC response not ok")})}).catch(()=>{y.info(_i)})}function Tt(t){if(!t)return t;let e=m.getInstance(),n=t.entries||{};return n.fpr_enabled!==void 0?e.loggingEnabled=String(n.fpr_enabled)==="true":e.loggingEnabled=_.loggingEnabled,n.fpr_log_source?e.logSource=Number(n.fpr_log_source):_.logSource&&(e.logSource=_.logSource),n.fpr_log_endpoint_url?e.logEndPointUrl=n.fpr_log_endpoint_url:_.logEndPointUrl&&(e.logEndPointUrl=_.logEndPointUrl),n.fpr_log_transport_key?e.transportKey=n.fpr_log_transport_key:_.transportKey&&(e.transportKey=_.transportKey),n.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate):_.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=_.networkRequestsSamplingRate),n.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate):_.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=_.tracesSamplingRate),e.logTraceAfterSampling=At(e.tracesSamplingRate),e.logNetworkAfterSampling=At(e.networkRequestsSamplingRate),t}function Ii(t){return Number(t)>Date.now()}function At(t){return Math.random()<=t}var xe=1,Ce;function Ht(t){return xe=2,Ce=Ce||vi(t),Ce}function yi(){return xe===3}function vi(t){return wi().then(()=>ti(t.installations)).then(e=>gi(t,e)).then(()=>Ct(),()=>Ct())}function wi(){let t=h.getInstance().document;return new Promise(e=>{if(t&&t.readyState!=="complete"){let n=()=>{t.readyState==="complete"&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}function Ct(){xe=3}var Pe=10*1e3,Si=5.5*1e3,qt=3,Ti=1e3,Q=qt,O=[],Ot=!1;function Ai(){Ot||(Z(Si),Ot=!0)}function Z(t){setTimeout(()=>{if(Q!==0){if(!O.length)return Z(Pe);Ci()}},t)}function Ci(){let t=O.splice(0,Ti),e=t.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:m.getInstance().logSource,log_event:e};Oi(n,t).catch(()=>{O=[...t,...O],Q--,y.info(`Tries left: ${Q}.`),Z(Pe)})}function Oi(t,e){return Di(t).then(n=>(n.ok||y.info("Call to Firebase backend failed."),n.json())).then(n=>{let r=Number(n.nextRequestWaitMillis),i=Pe;isNaN(r)||(i=Math.max(r,i));let s=n.logResponseDetails;Array.isArray(s)&&s.length>0&&s[0].responseAction==="RETRY_REQUEST_LATER"&&(O=[...e,...O],y.info("Retry transport request later.")),Q=qt,Z(i)})}function Di(t){let e=m.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}function Ri(t){if(!t.eventTime||!t.message)throw p.create("invalid cc log");O=[...O,t]}function Ni(t){return(...e)=>{let n=t(...e);Ri({message:n,eventTime:Date.now()})}}var Oe;function Wt(t,e){Oe||(Oe=Ni(ki)),Oe(t,e)}function Y(t){let e=m.getInstance();!e.instrumentationEnabled&&t.isAuto||!e.dataCollectionEnabled&&!t.isAuto||h.getInstance().requiredApisAvailable()&&(t.isAuto&&Vt()!==U.VISIBLE||(yi()?De(t):Ht(t.performanceController).then(()=>De(t),()=>De(t))))}function De(t){if(!ke())return;let e=m.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>Wt(t,1),0)}function Mi(t){let e=m.getInstance();if(!e.instrumentationEnabled)return;let n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n===r||n===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>Wt(t,0),0)}function ki(t,e){return e===0?xi(t):Pi(t)}function xi(t){let e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:Kt(t.performanceController.app),network_request_metric:e};return JSON.stringify(n)}function Pi(t){let e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};Object.keys(t.counters).length!==0&&(e.counters=t.counters);let n=t.getAttributes();Object.keys(n).length!==0&&(e.custom_attributes=n);let r={application_info:Kt(t.performanceController.app),trace_metric:e};return JSON.stringify(r)}function Kt(t){return{google_app_id:zt(t),app_instance_id:ke(),web_app_info:{sdk_version:Mt,page_url:h.getInstance().getUrl(),service_worker_status:ai(),visibility_state:Vt(),effective_connection_type:ci()},application_process_state:0}}var Bi=100,Li="_",Fi=[xt,Pt,Bt];function Ui(t,e){return t.length===0||t.length>Bi?!1:e&&e.startsWith(kt)&&Fi.indexOf(t)>-1||!t.startsWith(Li)}function $i(t){let e=Math.floor(t);return e<t&&y.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}var k=class t{constructor(e,n,r=!1,i){this.performanceController=e,this.name=n,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=h.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${Xr}-${this.randomId}-${this.name}`,this.traceStopMark=`${Yr}-${this.randomId}-${this.name}`,this.traceMeasure=i||`${Ne}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw p.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw p.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Y(this)}record(e,n,r){if(e<=0)throw p.create("nonpositive trace startTime",{traceName:this.name});if(n<=0)throw p.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(let i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Math.floor(Number(r.metrics[i])));Y(this)}incrementMetric(e,n=1){this.counters[e]===void 0?this.putMetric(e,n):this.putMetric(e,this.counters[e]+n)}putMetric(e,n){if(Ui(e,this.name))this.counters[e]=$i(n??0);else throw p.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,n){let r=ui(e),i=li(n);if(r&&i){this.customAttributes[e]=n;return}if(!r)throw p.create("invalid attribute name",{attributeName:e});if(!i)throw p.create("invalid attribute value",{attributeValue:n})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){let e=this.api.getEntriesByName(this.traceMeasure),n=e&&e[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,n,r,i){let s=h.getInstance().getUrl();if(!s)return;let o=new t(e,kt+s,!0),a=Math.floor(h.getInstance().getTimeOrigin()*1e3);o.setStartTime(a),n&&n[0]&&(o.setDuration(Math.floor(n[0].duration*1e3)),o.putMetric("domInteractive",Math.floor(n[0].domInteractive*1e3)),o.putMetric("domContentLoadedEventEnd",Math.floor(n[0].domContentLoadedEventEnd*1e3)),o.putMetric("loadEventEnd",Math.floor(n[0].loadEventEnd*1e3)));let c="first-paint",l="first-contentful-paint";if(r){let g=r.find(E=>E.name===c);g&&g.startTime&&o.putMetric(xt,Math.floor(g.startTime*1e3));let d=r.find(E=>E.name===l);d&&d.startTime&&o.putMetric(Pt,Math.floor(d.startTime*1e3)),i&&o.putMetric(Bt,Math.floor(i*1e3))}Y(o)}static createUserTimingTrace(e,n){let r=new t(e,n,!1,n);Y(r)}};function Dt(t,e){let n=e;if(!n||n.responseStart===void 0)return;let r=h.getInstance().getTimeOrigin(),i=Math.floor((n.startTime+r)*1e3),s=n.responseStart?Math.floor((n.responseStart-n.startTime)*1e3):void 0,o=Math.floor((n.responseEnd-n.startTime)*1e3),a=n.name&&n.name.split("?")[0],c={performanceController:t,url:a,responsePayloadBytes:n.transferSize,startTimeUs:i,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o};Mi(c)}var ji=5e3;function Rt(t){ke()&&(setTimeout(()=>zi(t),0),setTimeout(()=>Vi(t),0),setTimeout(()=>Hi(t),0))}function Vi(t){let e=h.getInstance(),n=e.getEntriesByType("resource");for(let r of n)Dt(t,r);e.setupObserver("resource",r=>Dt(t,r))}function zi(t){let e=h.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout(()=>{k.createOobTrace(t,n,r),i=void 0},ji);e.onFirstInputDelay(s=>{i&&(clearTimeout(i),k.createOobTrace(t,n,r,s))})}else k.createOobTrace(t,n,r)}function Hi(t){let e=h.getInstance(),n=e.getEntriesByType("measure");for(let r of n)Nt(t,r);e.setupObserver("measure",r=>Nt(t,r))}function Nt(t,e){let n=e.name;n.substring(0,Ne.length)!==Ne&&k.createUserTimingTrace(t,n)}var Me=class{constructor(e,n){this.app=e,this.installations=n,this.initialized=!1}_init(e){this.initialized||(e?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),e?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),h.getInstance().requiredApisAvailable()?z().then(n=>{n&&(Ai(),Ht(this).then(()=>Rt(this),()=>Rt(this)),this.initialized=!0)}).catch(n=>{y.info(`Environment doesn't support IndexedDB: ${n}`)}):y.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){m.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return m.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){m.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return m.getInstance().dataCollectionEnabled}},qi="[DEFAULT]";function Ds(t=be()){return t=H(t),B(t,"performance").getImmediate()}function Rs(t,e){t=H(t);let n=B(t,"performance");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(x(s,e??{}))return i;throw p.create("already initialized")}return n.initialize({options:e})}function Ns(t,e){return t=H(t),new k(t,e)}var Wi=(t,{options:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();if(n.name!==qi)throw p.create("FB not default");if(typeof window>"u")throw p.create("no window");ei(window);let i=new Me(n,r);return i._init(e),i};function Ki(){C(new b("performance",Wi,"PUBLIC")),S(wt,Re),S(wt,Re,"esm2017")}Ki();export{Fe as a,Ue as b,rr as c,be as d,ps as e,S as f,Ds as g,Rs as h,Ns as i};
